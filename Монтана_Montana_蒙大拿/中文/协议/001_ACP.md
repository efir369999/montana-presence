# 非时间坐标存在 (ACP)

**基于存在的共识协议**
**Montana协议 v1.0**

---

## 摘要

ACP — 第一个共识机制，其中证明基于**时间中的存在**，而不是工作（PoW）或资本（PoS）。时间无法加速、购买或提前积累。14天需要14天 — 对所有人平等。

**关键公式:**
```
lim(evidence → ∞) 1 Ɉ → 1 秒
```

---

## 1. 引言

### 1.1 现有共识的问题

| 协议 | 问题 | 资源 | 缺陷 |
|------|------|------|------|
| 比特币 (PoW) | "做了多少工作?" | 电力 | 环境破坏 |
| 以太坊 (PoS) | "质押了多少?" | 资本 | 富者更富 |
| **Montana (ACP)** | **"你在这里吗?"** | **时间** | **无** |

### 1.2 Montana解决方案

时间 — 唯一在所有人之间平等分配的资源。它无法购买、积累或加速。

---

## 2. 架构

### 2.1 混合模型 80/20

```
┌─────────────────────────────────────────────────────────┐
│                    ACP 共识                              │
├─────────────────────────────────────────────────────────┤
│  80% │ Full Node      │ 服务器 │ 基础设施              │
│  20% │ Verified User  │ 人类   │ 去中心化              │
└─────────────────────────────────────────────────────────┘
```

**源代码:** [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs)

```rust
pub const FULL_NODE_CAP_PERCENT: u64 = 80;
pub const VERIFIED_USER_CAP_PERCENT: u64 = 20;
```

### 2.2 存在证明

每个节点每τ₁（1分钟）签署其存在:

```rust
message = "MONTANA_PRESENCE_V1:"
        ‖ timestamp
        ‖ prev_slice_hash
        ‖ pubkey
        ‖ τ₂_index

signature = ML-DSA-65.Sign(private_key, message)
```

**源代码:** [consensus.rs#L177-L190](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs#L177-L190)

---

## 3. 确定性抽签

### 3.1 生产者选择

```rust
seed = SHA3-256(prev_slice_hash ‖ τ₂_index)
winner = weighted_select(eligible_nodes, seed)
```

种子在生产者能够影响结果之前就已固定。

**源代码:** [fork_choice.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/fork_choice.rs)

### 3.2 研磨攻击防护

```rust
// 正确:  seed = SHA3(prev_slice_hash ‖ τ₂_index)
// 错误:  seed = SHA3(prev_slice_hash ‖ τ₂_index ‖ presence_root)
//                                                    ^^^^^^^^^^^^^^
//                                                    生产者控制这个!
```

---

## 4. 生物识别验证

### 4.1 FIDO2/WebAuthn

Verified User需要物理存在证明:

```rust
// User Present (UP) — 物理触摸
if flags & 0x01 == 0 {
    return Err(PresenceError::Fido2UserNotPresent);
}

// User Verified (UV) — 生物识别（指纹/面部）
if flags & 0x04 == 0 {
    return Err(PresenceError::Fido2UserNotVerified);
}
```

**源代码:** [consensus.rs#L382-L389](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs#L382-L389)

---

## 5. 攻击防护

| 攻击 | 防御机制 | 源代码 |
|------|----------|--------|
| 女巫攻击 | 生物识别 + 安全芯片 | [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs) |
| 机器人 | 随机间隔 10-40分钟 | [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs) |
| 研磨攻击 | 区块前种子 | [fork_choice.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/fork_choice.rs) |
| 日蚀攻击 | 80/20层级上限 | [eviction.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/net/eviction.rs) |

---

## 6. 科学创新

1. **时间共识** — 时间作为唯一的证明资源
2. **生物识别验证** — 协议级别的FIDO2/WebAuthn
3. **混合架构** — 服务器（稳定性）+ 人类（去中心化）
4. **后量子密码学** — 从创世区块开始使用ML-DSA-65

---

## 7. 参考文献

| 文档 | 链接 |
|------|------|
| Montana协议 | [MONTANA.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/MONTANA.md) |
| 第0层（计算） | [layer_0.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/layer_0.md) |
| 第1层（原语） | [layer_1.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/layer_1.md) |
| 源代码 | [montana/src/](https://github.com/efir369999/junomontanaagibot/tree/main/Montana%20ACP/montana/src) |

---

```
Alejandro Montana
Montana协议 v1.0
2026年1月

github.com/efir369999/junomontanaagibot
```
