# Atemporal Coordinate Presence (ACP)

**Presence-Based Consensus Protocol**
**Montana Protocol v1.0**

---

## Abstract

ACP — первый консенсус-механизм, где доказательство основано на **присутствии во времени**, а не на работе (PoW) или капитале (PoS). Время нельзя ускорить, купить или накопить заранее. 14 дней требуют 14 дней — для всех одинаково.

**Ключевая формула:**
```
lim(evidence → ∞) 1 Ɉ → 1 секунда
```

---

## 1. Введение

### 1.1 Проблема существующих консенсусов

| Протокол | Вопрос | Ресурс | Проблема |
|----------|--------|--------|----------|
| Bitcoin (PoW) | "Сколько работы?" | Электричество | Экологический ущерб |
| Ethereum (PoS) | "Сколько поставил?" | Капитал | Rich-get-richer |
| **Montana (ACP)** | **"ТЫ ЗДЕСЬ?"** | **Время** | **Нет** |

### 1.2 Решение Montana

Время — единственный ресурс, распределённый одинаково между всеми людьми. Его нельзя купить, накопить или ускорить.

---

## 2. Архитектура

### 2.1 Гибридная модель 80/20

```
┌─────────────────────────────────────────────────────────┐
│                    ACP CONSENSUS                         │
├─────────────────────────────────────────────────────────┤
│  80% │ Full Node      │ Серверы  │ Инфраструктура      │
│  20% │ Verified User  │ Люди     │ Децентрализация     │
└─────────────────────────────────────────────────────────┘
```

**Исходный код:** [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs)

```rust
pub const FULL_NODE_CAP_PERCENT: u64 = 80;
pub const VERIFIED_USER_CAP_PERCENT: u64 = 20;
```

### 2.2 Presence Proof

Каждый узел подписывает своё присутствие каждую τ₁ (1 минуту):

```rust
message = "MONTANA_PRESENCE_V1:"
        ‖ timestamp
        ‖ prev_slice_hash
        ‖ pubkey
        ‖ τ₂_index

signature = ML-DSA-65.Sign(private_key, message)
```

**Исходный код:** [consensus.rs#L177-L190](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs#L177-L190)

---

## 3. Детерминированная лотерея

### 3.1 Выбор producer'а

```rust
seed = SHA3-256(prev_slice_hash ‖ τ₂_index)
winner = weighted_select(eligible_nodes, seed)
```

Seed фиксируется ДО того, как producer может влиять на результат.

**Исходный код:** [fork_choice.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/fork_choice.rs)

### 3.2 Защита от grinding

```rust
// ПРАВИЛЬНО:  seed = SHA3(prev_slice_hash ‖ τ₂_index)
// НЕПРАВИЛЬНО: seed = SHA3(prev_slice_hash ‖ τ₂_index ‖ presence_root)
//                                                       ^^^^^^^^^^^^^^
//                                                       Producer контролирует!
```

---

## 4. Биометрическая верификация

### 4.1 FIDO2/WebAuthn

Verified User требует доказательство физического присутствия:

```rust
// User Present (UP) — физическое касание
if flags & 0x01 == 0 {
    return Err(PresenceError::Fido2UserNotPresent);
}

// User Verified (UV) — биометрия (отпечаток/лицо)
if flags & 0x04 == 0 {
    return Err(PresenceError::Fido2UserNotVerified);
}
```

**Исходный код:** [consensus.rs#L382-L389](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs#L382-L389)

---

## 5. Защита от атак

| Атака | Механизм защиты | Исходный код |
|-------|-----------------|--------------|
| Sybil | Биометрия + Secure Element | [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs) |
| Bot | Случайный интервал 10-40 мин | [consensus.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/consensus.rs) |
| Grinding | Seed до блока | [fork_choice.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/fork_choice.rs) |
| Eclipse | 80/20 tier caps | [eviction.rs](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/montana/src/net/eviction.rs) |

---

## 6. Научная новизна

1. **Временной консенсус** — время как единственный ресурс доказательства
2. **Биометрическая верификация** — FIDO2/WebAuthn на уровне протокола
3. **Гибридная архитектура** — серверы (стабильность) + люди (децентрализация)
4. **Постквантовая криптография** — ML-DSA-65 с генезиса

---

## 7. Ссылки

| Документ | Ссылка |
|----------|--------|
| Протокол Montana | [MONTANA.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/MONTANA.md) |
| Layer 0 (Вычисления) | [layer_0.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/layer_0.md) |
| Layer 1 (Примитивы) | [layer_1.md](https://github.com/efir369999/junomontanaagibot/blob/main/Montana%20ACP/layer_1.md) |
| Исходный код | [montana/src/](https://github.com/efir369999/junomontanaagibot/tree/main/Montana%20ACP/montana/src) |

---

```
Alejandro Montana
Montana Protocol v1.0
Январь 2026

github.com/efir369999/junomontanaagibot
```
