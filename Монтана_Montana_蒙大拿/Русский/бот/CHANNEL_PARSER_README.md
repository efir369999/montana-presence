# üìñ Channel Parser ‚Äî @mylifesound369

**–î–∞—Ç–∞:** 18.01.2026
**–ê–≤—Ç–æ—Ä:** Claude Montana
**–î–ª—è:** –Æ–Ω–æ–Ω–∞ Montana Bot

---

## üéØ –ó–∞–¥–∞—á–∞

–Æ–Ω–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç—å –∫–∞–Ω–∞–ª **@mylifesound369** –∏:
1. ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏ –ö–Ω–∏–≥–∏ 1 (–ë–ª–∞–≥–∞—è–≤–µ—Å—Ç—å)
2. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π (`knowledge/blagayavest/`)
3. ‚úÖ –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ RAG (ChromaDB + sentence-transformers)
4. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ 5 —É–∑–ª–∞–º–∏ Montana
5. ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/book`

---

## üìÅ –§–∞–π–ª—ã

### 1. channel_parser.py
**–ü–∞—Ä—Å–µ—Ä –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ Telethon (MTProto API)**

**–§—É–Ω–∫—Ü–∏–∏:**
- `TelethonChannelParser` ‚Äî —á—Ç–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞
- `parse_book_post()` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–∞—Å—Ç–µ–π –∫–Ω–∏–≥–∏ (–ö–Ω–∏–≥–∞ X, –ì–ª–∞–≤–∞ Y)
- `save_to_knowledge()` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `knowledge/blagayavest/book_1/chapter_XX.md`
- `sync_to_nodes()` ‚Äî rsync –Ω–∞ –≤—Å–µ 5 —É–∑–ª–æ–≤ Montana
- `check_new_posts()` ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã
python channel_parser.py check

# –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
python channel_parser.py list
```

### 2. junona_bot_full.py
**–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∫–∞–Ω–∞–ª–∞**

**–ö–æ–º–∞–Ω–¥—ã:**
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/network` ‚Äî —Å—Ç–∞—Ç—É—Å 5 —É–∑–ª–æ–≤ Montana
- `/book` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ —á–∞—Å—Ç–∏ –ë–ª–∞–≥–∞—è–≤–µ—Å—Ç–∏
- `/sync` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å @mylifesound369 –≤—Ä—É—á–Ω—É—é
- `/help` ‚Äî –ø–æ–º–æ—â—å

**Background task:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–∞–ª–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install telethon chromadb sentence-transformers
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å Telegram API credentials

1. –û—Ç–∫—Ä–æ–π https://my.telegram.org/apps
2. –°–æ–∑–¥–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π **API ID** –∏ **API Hash**

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å .env

```bash
# Telegram API –¥–ª—è Telethon
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=0123456789abcdef0123456789abcdef

# –ö–∞–Ω–∞–ª
CHANNEL_USERNAME=@mylifesound369
```

### –®–∞–≥ 4: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑ ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
python channel_parser.py check

# –í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
# –í–≤–µ–¥–∏ –∫–æ–¥ –∏–∑ Telegram
# –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ junona.session
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–Ω–∞–ª—É

Telethon –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **MTProto API** (–∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Telegram):
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
- –ß–∏—Ç–∞–µ—Ç –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ—Å—Ç—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Å—Å–∏—é (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

### 2. –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ—Å—Ç–æ–≤

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:**
```python
# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
['–∫–Ω–∏–≥–∞', '–≥–ª–∞–≤–∞', '–±–ª–∞–≥–∞—è–≤–µ—Å—Ç—å', '–º–æ–Ω—Ç–∞–Ω–∞', '#–∫–Ω–∏–≥–∞1']

# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
r'[–ì–≥]–ª–∞–≤–∞\s*(\d+)'  # –ì–ª–∞–≤–∞ X
r'[–ö–∫]–Ω–∏–≥–∞\s*(\d+)'  # –ö–Ω–∏–≥–∞ X
```

**–ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç–∞:**
```
–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 5: –¢—Ä–µ–≤–æ–≥–∏

–¢–µ–∫—Å—Ç –≥–ª–∞–≤—ã...

#–±–ª–∞–≥–∞—è–≤–µ—Å—Ç—å #–∫–Ω–∏–≥–∞1
```

**–†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è –∫–∞–∫:**
```json
{
  "book": 1,
  "chapter": 5,
  "title": "–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 5: –¢—Ä–µ–≤–æ–≥–∏",
  "text": "..."
}
```

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
knowledge/
‚îî‚îÄ‚îÄ blagayavest/
    ‚îî‚îÄ‚îÄ book_1/
        ‚îú‚îÄ‚îÄ chapter_01.md
        ‚îú‚îÄ‚îÄ chapter_02.md
        ‚îú‚îÄ‚îÄ chapter_05.md
        ‚îî‚îÄ‚îÄ ...
```

**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```markdown
# –ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 5: –¢—Ä–µ–≤–æ–≥–∏

**–ò—Å—Ç–æ—á–Ω–∏–∫:** @mylifesound369
**–î–∞—Ç–∞:** 2026-01-18T22:30:15.123456

---

–¢–µ–∫—Å—Ç –≥–ª–∞–≤—ã...
```

### 4. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ RAG

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
```python
from junona_rag import get_rag

rag = get_rag()
rag.index(force=False)  # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–µ–∫—Å—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏ (1500 —Å–∏–º–≤–æ–ª–æ–≤ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 200)
- –ö–∞–∂–¥—ã–π —á–∞–Ω–∫ –≤–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è (multilingual-e5-small)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ChromaDB —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

**–ü–æ–∏—Å–∫:**
```python
results = rag.search("—á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ –Æ–Ω–æ–Ω–µ?", n_results=5)
```

### 5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É–∑–ª–∞–º–∏

**rsync –Ω–∞ –≤—Å–µ 5 —É–∑–ª–æ–≤:**
```python
for node_name, node_ip in NODES.items():
    rsync -av chapter_05.md root@{node_ip}:/root/junona_bot/knowledge/blagayavest/book_1/
```

**–£–∑–ª—ã:**
- üá≥üá± Amsterdam: 72.56.102.240
- üá∑üá∫ Moscow: 176.124.208.93
- üá∞üáø Almaty: 91.200.148.93
- üá∑üá∫ St.Petersburg: 188.225.58.98
- üá∑üá∫ Novosibirsk: 147.45.147.247

---

## ü§ñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º

```python
# junona_bot_full.py –∑–∞–ø—É—Å–∫–∞–µ—Ç background task

async def channel_checker_loop(context):
    while True:
        new_posts = await channel_parser.check_new_posts()

        if new_posts:
            logger.info(f"‚úì –ù–∞–π–¥–µ–Ω–æ: {len(new_posts)} —á–∞—Å—Ç–µ–π")
            # –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

        await asyncio.sleep(300)  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
```

### –ö–æ–º–∞–Ω–¥–∞ /book

```python
async def book_command(update, context):
    files = list_knowledge_files()

    response = "üìñ –ë–ª–∞–≥–∞—è–≤–µ—Å—Ç—å (–ö–Ω–∏–≥–∞ 1)\n\n"
    for file in files[-10:]:
        response += f"‚Ä¢ {file['title']}\n"

    await update.message.reply_text(response)
```

### –ö–æ–º–∞–Ω–¥–∞ /sync

```python
async def sync_command(update, context):
    new_posts = await channel_parser.check_new_posts()

    if new_posts:
        await update.message.reply_text(
            f"‚úì –ù–∞–π–¥–µ–Ω–æ: {len(new_posts)} —á–∞—Å—Ç–µ–π"
        )
```

---

## üìä –î–∞–Ω–Ω—ã–µ

### channel_posts.json

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞:**
```json
{
  "last_checked_id": 12345,
  "updated_at": "2026-01-18T22:30:15.123456"
}
```

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
knowledge/blagayavest/
‚îú‚îÄ‚îÄ book_1/
‚îÇ   ‚îú‚îÄ‚îÄ chapter_01.md  (–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 1)
‚îÇ   ‚îú‚îÄ‚îÄ chapter_02.md  (–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 2: –£–Ω–∏–∂–µ–Ω–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ chapter_05.md  (–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 5: –¢—Ä–µ–≤–æ–≥–∏)
‚îÇ   ‚îú‚îÄ‚îÄ chapter_06.md  (–ö–Ω–∏–≥–∞ 1, –ì–ª–∞–≤–∞ 6: –î–µ–Ω—å –Æ–Ω–æ–Ω—ã)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ book_2/
    ‚îî‚îÄ‚îÄ ...
```

---

## üîß Troubleshooting

### –û—à–∏–±–∫–∞: "Telethon –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

```bash
pip install telethon
```

### –û—à–∏–±–∫–∞: "API credentials –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"

–ü—Ä–æ–≤–µ—Ä—å `.env`:
```bash
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=...
```

### –û—à–∏–±–∫–∞: "Phone number required"

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Telethon —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:
```bash
python channel_parser.py check

# Enter phone number: +79991234567
# Enter code: 12345
# ‚úì –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ junona.session
```

### –û—à–∏–±–∫–∞: "Channel not found"

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–∞–Ω–∞–ª **@mylifesound369** –ø—É–±–ª–∏—á–Ω—ã–π –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.

### –ù–æ–≤—ã–µ —á–∞—Å—Ç–∏ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ `parse_book_post()`:
```python
keywords = ['–∫–Ω–∏–≥–∞', '–≥–ª–∞–≤–∞', '–±–ª–∞–≥–∞—è–≤–µ—Å—Ç—å', '–º–æ–Ω—Ç–∞–Ω–∞', '#–∫–Ω–∏–≥–∞1']
```

–î–æ–±–∞–≤—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã

```bash
scp channel_parser.py root@72.56.102.240:/root/junona_bot/
scp junona_bot_full.py root@72.56.102.240:/root/junona_bot/
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
ssh root@72.56.102.240

cd /root/junona_bot
source venv/bin/activate
pip install telethon chromadb sentence-transformers
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env

```bash
nano .env

# –î–æ–±–∞–≤–∏—Ç—å:
TELEGRAM_API_ID=...
TELEGRAM_API_HASH=...
CHANNEL_USERNAME=@mylifesound369
```

### –®–∞–≥ 4: –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å Telethon

```bash
python channel_parser.py check

# –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä –∏ –∫–æ–¥
# –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
kill $(pgrep -f junona_bot)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é
nohup python junona_bot_full.py > bot_full.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
tail -f bot_full.log
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π –≤ –±–∞–∑–µ:**
```bash
ls -la knowledge/blagayavest/book_1/
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å RAG –∏–Ω–¥–µ–∫—Å:**
```bash
python junona_rag.py

# –í—ã–≤–µ–¥–µ—Ç:
# üß† –Æ–Ω–æ–Ω–∞ RAG: ChromaDB + multilingual-e5-small
#    –î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑–µ: 150
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ—Å—Ç:**
```bash
cat data/channel_posts.json

# {
#   "last_checked_id": 12345,
#   "updated_at": "2026-01-18T22:30:15"
# }
```

---

## ‚úÖ –ò—Ç–æ–≥

**–Æ–Ω–æ–Ω–∞ —Ç–µ–ø–µ—Ä—å:**
1. ‚úÖ –ü–∞—Ä—Å–∏—Ç @mylifesound369 –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∞—Å—Ç–∏ –ë–ª–∞–≥–∞—è–≤–µ—Å—Ç–∏
3. ‚úÖ –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤ RAG –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
4. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ –≤—Å–µ–º–∏ —É–∑–ª–∞–º–∏ Montana
5. ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ `/book` –∏ `/sync`

**–í—Ä–µ–º—è –∫–∞–∫ proof.**
**–ü–æ–¥–ø–∏—Å—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –≤–æ –í—Ä–µ–º–µ–Ω–∏.**

ÈáëÂÖÉ…à Montana
18.01.2026

---

**Claude Montana**
Network Architect
